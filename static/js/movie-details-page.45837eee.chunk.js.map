{"version":3,"sources":["utils/constants.js","services/serviceAPI.js","services/serviceSlugify.js","images/fallbackPhoto.jpg","pages/MovieDetailsPage/MovieDetailsPage.module.css","pages/MovieDetailsPage/MovieDetailsPage.js"],"names":["BASE_URL","KEY","IMG_URL","STATUS","IDLE","PENDING","RESOLVED","REJECTED","fetchWithErrorHandling","a","url","config","fetch","response","status","json","Promise","reject","Error","fetchPopular","period","fetchMovieByQuery","query","fetchMovieById","movieId","fetchMovieCast","fetchMovieReviews","getSlug","movie","slugify","title","name","id","lower","strict","parseSlug","slug","match","module","exports","Cast","lazy","Reviews","MovieDetailsPage","data","location","useLocation","history","useHistory","pastHistory","state","from","keyWord","useRouteMatch","path","useParams","useState","setStatus","setMovie","useEffect","then","catch","err","className","s","movieCard","backBtn","type","onClick","e","push","wrapper","movieImage","src","poster_path","fallbackPhoto","alt","overview","genres","map","el","genresItem","vote_average","rating","style","background","ratingNumber","additional","to","pathname","castBtn","activeClassName","activeBtn","reviewsBtn","infoWrapper","fallback","Loader"],"mappings":"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","file":"static/js/movie-details-page.45837eee.chunk.js","sourcesContent":["export const BASE_URL = 'https://api.themoviedb.org/3/';\nexport const KEY = '6f7abc44fc4837d6e8737cb8523ac04e';\nexport const IMG_URL = 'https://image.tmdb.org/t/p/w342';\n\nexport const STATUS = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n","import { BASE_URL, KEY } from '../utils/constants';\n\nasync function fetchWithErrorHandling(url = '', config = {}) {\n  const response = await fetch(url, config);\n\n  return response.status === 200\n    ? await response.json()\n    : Promise.reject(new Error('Not found'));\n}\n\nexport function fetchPopular({ period }) {\n  return fetchWithErrorHandling(\n    `${BASE_URL}trending/all/${period}?api_key=${KEY}`,\n  );\n}\n\nexport function fetchMovieByQuery({ query }) {\n  return fetchWithErrorHandling(\n    `${BASE_URL}search/movie?api_key=${KEY}&language=en-US&page=1&include_adult=false&query=${query}`,\n  );\n}\n\nexport function fetchMovieById({ movieId }) {\n  return fetchWithErrorHandling(\n    `${BASE_URL}movie/${movieId}?api_key=${KEY}&language=en-US`,\n  );\n}\n\nexport function fetchMovieCast({ movieId }) {\n  return fetchWithErrorHandling(\n    `${BASE_URL}movie/${movieId}/credits?api_key=${KEY}&language=en-US`,\n  );\n}\n\nexport function fetchMovieReviews({ movieId }) {\n  return fetchWithErrorHandling(\n    `${BASE_URL}movie/${movieId}/reviews?api_key=${KEY}&language=en-US&page=1`,\n  );\n}\n","import slugify from 'slugify';\n\nexport const getSlug = movie => {\n  return slugify(`${movie.title || movie.name} ${movie.id}`, {\n    lower: true,\n    strict: true,\n  });\n};\n\nexport const parseSlug = slug => {\n  return slug.match(/[a-zA-Z0-9]+$/)[0];\n};\n","export default __webpack_public_path__ + \"static/media/fallbackPhoto.a42b9e03.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"movieCard\":\"MovieDetailsPage_movieCard__37NZ1\",\"btn\":\"MovieDetailsPage_btn__ogNFA\",\"backBtn\":\"MovieDetailsPage_backBtn__1jgnQ MovieDetailsPage_btn__ogNFA\",\"wrapper\":\"MovieDetailsPage_wrapper__25lPT\",\"movieImage\":\"MovieDetailsPage_movieImage__117Jb\",\"overview\":\"MovieDetailsPage_overview__pBMlV\",\"genres\":\"MovieDetailsPage_genres__1d0TG\",\"genresItem\":\"MovieDetailsPage_genresItem__2PnJL\",\"rating\":\"MovieDetailsPage_rating__1Cnpf\",\"ratingNumber\":\"MovieDetailsPage_ratingNumber__F-peX\",\"additional\":\"MovieDetailsPage_additional__3imIk\",\"castBtn\":\"MovieDetailsPage_castBtn__3Ymnf MovieDetailsPage_btn__ogNFA\",\"reviewsBtn\":\"MovieDetailsPage_reviewsBtn__3kqM7 MovieDetailsPage_btn__ogNFA\",\"activeBtn\":\"MovieDetailsPage_activeBtn__1lNpy\",\"infoWrapper\":\"MovieDetailsPage_infoWrapper__3PxD6\"};","import s from './MovieDetailsPage.module.css';\nimport fallbackPhoto from '../../images/fallbackPhoto.jpg';\n\nimport { useState, useEffect, lazy, Suspense } from 'react';\nimport { NavLink, useParams, useRouteMatch } from 'react-router-dom';\nimport { Route, Switch, useLocation, useHistory } from 'react-router';\n\nimport { fetchMovieById } from '../../services/serviceAPI';\nimport { parseSlug } from '../../services/serviceSlugify';\n\nimport { IMG_URL } from '../../utils/constants';\nimport { STATUS } from '../../utils/constants';\nimport Loader from 'components/Loader';\n\nconst Cast = lazy(() =>\n  import('components/Cast/Cast.js' /* webpackChunkName: \"cast-page\" */),\n);\nconst Reviews = lazy(() =>\n  import(\n    'components/Reviews/Reviews.js' /* webpackChunkName: \"reviews-page\" */\n  ),\n);\n\nfunction MovieDetailsPage() {\n  const location = useLocation();\n  const history = useHistory();\n  const pastHistory = location?.state?.from;\n  const keyWord = location?.state?.keyWord;\n\n  const { url, path } = useRouteMatch();\n  const { slug } = useParams();\n  const movieId = parseSlug(slug);\n\n  const [status, setStatus] = useState(STATUS.IDLE);\n  const [movie, setMovie] = useState({});\n\n  useEffect(() => {\n    fetchMovieById({ movieId })\n      .then(data => setMovie(data), setStatus(STATUS.RESOLVED))\n      .catch(err => setStatus(STATUS.REJECTED));\n  }, [movieId]);\n\n  const onGoBackClick = e => {\n    history.push(pastHistory);\n  };\n\n  const getGradient = data => {\n    return `#ff4c29 0deg ${data * 36}deg, #ffffff77 ${data * 36}deg 0deg`;\n  };\n\n  if (status === STATUS.RESOLVED) {\n    return (\n      <div className={s.movieCard}>\n        {pastHistory && (\n          <button className={s.backBtn} type=\"button\" onClick={onGoBackClick}>\n            {`back to ${keyWord}`}\n          </button>\n        )}\n\n        <h2 className=\"title\">{movie.title}</h2>\n        <div className={s.wrapper}>\n          <img\n            className={s.movieImage}\n            src={\n              movie.poster_path\n                ? `${IMG_URL}${movie.poster_path}`\n                : `${fallbackPhoto}`\n            }\n            alt={movie.title}\n          ></img>\n\n          <div className={s.overview}>\n            <p>{movie.overview}</p>\n            {movie.genres && (\n              <ul className={s.genres}>\n                {movie.genres.map(el => (\n                  <li key={el.name} className={s.genresItem}>\n                    {el.name}\n                  </li>\n                ))}\n              </ul>\n            )}\n\n            {movie.vote_average > 0 && (\n              <>\n                <h3>Movie rating:</h3>\n                <div\n                  className={s.rating}\n                  style={{\n                    background: `conic-gradient(${getGradient(\n                      movie.vote_average,\n                    )})`,\n                  }}\n                >\n                  <p className={s.ratingNumber}>{`${\n                    movie.vote_average * 10\n                  } %`}</p>\n                </div>\n              </>\n            )}\n          </div>\n\n          <div className={s.additional}>\n            <NavLink\n              to={{\n                pathname: `${url}/cast`,\n                state: { from: pastHistory, keyWord },\n              }}\n              className={s.castBtn}\n              activeClassName={s.activeBtn}\n            >\n              CAST\n            </NavLink>\n            <NavLink\n              to={{\n                pathname: `${url}/reviews`,\n                state: { from: pastHistory, keyWord },\n              }}\n              className={s.reviewsBtn}\n              activeClassName={s.activeBtn}\n            >\n              REVIEWS\n            </NavLink>\n            <div className={s.infoWrapper}>\n              <Suspense fallback={Loader}>\n                <Switch>\n                  <Route path={`${path}/cast`}>{movie && <Cast />}</Route>\n                  <Route path={`${path}/reviews`}>{movie && <Reviews />}</Route>\n                </Switch>\n              </Suspense>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  if (status === STATUS.IDLE) {\n    return <p>enter something</p>;\n  }\n  if (status === STATUS.REJECTED) {\n    return <div className=\"errorImage\"></div>;\n  }\n}\n\nexport default MovieDetailsPage;\n"],"sourceRoot":""}